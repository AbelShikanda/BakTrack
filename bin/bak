#!/bin/bash

# Get the absolute path of the script
SCRIPT_DIR=$(dirname "$(realpath "$0")")

# Help function for bak
if [[ "$1" == "-h" || "$1" == "--help" ]]; then
    echo "Usage: bak {push|pull|check|config}"
    echo
    echo "Commands:"
    echo "  push      - Pushes data to the backup location"
    echo "  pull      - Retrieves data from the backup location"
    echo "  check     - Checks the backup status"
    echo "  config    - Manage backup configurations (run 'bak config -h' for more info)"
    exit 0
fi

case "$1" in
  track)
    "$SCRIPT_DIR/bakpush"
    ;;
  restore)
    "$SCRIPT_DIR/bakpull"
    ;;
  check)
    "$SCRIPT_DIR/bakcheck"
    ;;
  config)
    shift
    "$SCRIPT_DIR/config" "$@" 
    ;;
  init)
    shift
    "$SCRIPT_DIR/bakinit" "$@"
    ;;
  *)
    echo "Usage: bak {-h|--help}"
    exit 1
    ;;
esac
